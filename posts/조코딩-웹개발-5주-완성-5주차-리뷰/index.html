<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="조코딩 웹개발 5주 완성 5주차 리뷰_CRUD, DB(SQLite)를 이용한 댓글창 만들기" /><meta property="og:locale" content="en" /><meta name="description" content="들어가기에 앞서" /><meta property="og:description" content="들어가기에 앞서" /><link rel="canonical" href="https://duckbankbok.github.io/posts/%EC%A1%B0%EC%BD%94%EB%94%A9-%EC%9B%B9%EA%B0%9C%EB%B0%9C-5%EC%A3%BC-%EC%99%84%EC%84%B1-5%EC%A3%BC%EC%B0%A8-%EB%A6%AC%EB%B7%B0/" /><meta property="og:url" content="https://duckbankbok.github.io/posts/%EC%A1%B0%EC%BD%94%EB%94%A9-%EC%9B%B9%EA%B0%9C%EB%B0%9C-5%EC%A3%BC-%EC%99%84%EC%84%B1-5%EC%A3%BC%EC%B0%A8-%EB%A6%AC%EB%B7%B0/" /><meta property="og:site_name" content="뀨로그 (GGyulog)" /><meta property="og:image" content="https://yt3.ggpht.com/JuRcVt9OFQgqh7UL1LjihpVLEbjdNXt3tGq-IQfqRMT8wVXgWg_tzyz0S_GVsgqkB3ucBC5fqeY=s900-c-k-c0x00ffffff-no-rj" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-12-31T12:00:00+09:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://yt3.ggpht.com/JuRcVt9OFQgqh7UL1LjihpVLEbjdNXt3tGq-IQfqRMT8wVXgWg_tzyz0S_GVsgqkB3ucBC5fqeY=s900-c-k-c0x00ffffff-no-rj" /><meta property="twitter:title" content="조코딩 웹개발 5주 완성 5주차 리뷰_CRUD, DB(SQLite)를 이용한 댓글창 만들기" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-01-09T21:53:44+09:00","datePublished":"2022-12-31T12:00:00+09:00","description":"들어가기에 앞서","headline":"조코딩 웹개발 5주 완성 5주차 리뷰_CRUD, DB(SQLite)를 이용한 댓글창 만들기","image":"https://yt3.ggpht.com/JuRcVt9OFQgqh7UL1LjihpVLEbjdNXt3tGq-IQfqRMT8wVXgWg_tzyz0S_GVsgqkB3ucBC5fqeY=s900-c-k-c0x00ffffff-no-rj","mainEntityOfPage":{"@type":"WebPage","@id":"https://duckbankbok.github.io/posts/%EC%A1%B0%EC%BD%94%EB%94%A9-%EC%9B%B9%EA%B0%9C%EB%B0%9C-5%EC%A3%BC-%EC%99%84%EC%84%B1-5%EC%A3%BC%EC%B0%A8-%EB%A6%AC%EB%B7%B0/"},"url":"https://duckbankbok.github.io/posts/%EC%A1%B0%EC%BD%94%EB%94%A9-%EC%9B%B9%EA%B0%9C%EB%B0%9C-5%EC%A3%BC-%EC%99%84%EC%84%B1-5%EC%A3%BC%EC%B0%A8-%EB%A6%AC%EB%B7%B0/"}</script><title>조코딩 웹개발 5주 완성 5주차 리뷰_CRUD, DB(SQLite)를 이용한 댓글창 만들기 | 뀨로그 (GGyulog)</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="뀨로그 (GGyulog)"><meta name="application-name" content="뀨로그 (GGyulog)"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7693574899621117" crossorigin="anonymous"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/icon.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">뀨로그 (GGyulog)</a></div><div class="site-subtitle font-italic">Younggyu's blog</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/duckbankbok" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://www.instagram.com/yg_bok/" aria-label="instagram" target="_blank" rel="noopener"> <i class="fab fa-instagram"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>조코딩 웹개발 5주 완성 5주차 리뷰_CRUD, DB(SQLite)를 이용한 댓글창 만들기</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><div onclick="handleAdClick(event)"> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7693574899621117" crossorigin="anonymous"></script> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7693574899621117" data-ad-slot="1580778312" data-ad-format="auto" data-full-width-responsive="true"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script></div><h1 data-toc-skip>조코딩 웹개발 5주 완성 5주차 리뷰_CRUD, DB(SQLite)를 이용한 댓글창 만들기</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1672455600" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Dec 31, 2022 </em> </span> <span> Updated <em class="" data-ts="1673268824" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jan 9, 2023 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/duckbankbok">복영규(Younggyu Bok)</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2859 words"> <em>15 min</em> read</span></div></div></div><div class="post-content"><h2 id="들어가기에-앞서"><span class="mr-2">들어가기에 앞서</span><a href="#들어가기에-앞서" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>안녕하세요! 오랜만에 인사드립니다:) 지난 여름방학에 시작한 조코딩님 웹개발 강의 리뷰를 바쁜 일로 미루고 미루다 결국 겨울방학에 마무리하게 되었습니다. 올해는 조코딩님 웹개발 강의 리뷰 포스팅을 하면서 더 많은 방문자를 얻을 수 있었고, 구글 애드센스도 블로그에 걸 수 있게 되어 매우 뿌듯한 해였습니다. 찾아와 주셔서 감사드리고, 내년에도 다양한 주제로 포스팅 하겠습니다😎</p><h2 id="crud"><span class="mr-2">CRUD</span><a href="#crud" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><img data-src="https://miro.medium.com/max/720/1*2eBdh0vLZjUyCDF6x1EqvQ.webp" alt="CRUD" data-proofer-ignore><em>이미지 출처: <a href="https://medium.com/geekculture/crud-operations-explained-2a44096e9c88">Medium</a></em></p><blockquote class="prompt-info"><div><p><strong>C</strong>reate, <strong>R</strong>ead, <strong>U</strong>pdate, <strong>D</strong>elete</p></div></blockquote><p><strong>CRUD</strong>는 대부분의 컴퓨터 소프트웨어가 가지는 기본적인 데이터 처리 기능인 Create(생성), Read(읽기), Update(갱신), Delete(삭제)를 묶어서 일컫는 말입니다 (<a href="https://ko.wikipedia.org/wiki/CRUD">위키백과</a>). 대부분의 웹사이트에서 CRUD를 활용한 서비스들을 제공하기 때문에 이번 포스트에서는 조코딩님이 만들었던 댓글창을 다시 만들어보며 CRUD를 직접 실습해 보도록 하겠습니다.</p><h2 id="dbsqlite를-이용한-댓글창-만들기"><span class="mr-2">DB(SQLite)를 이용한 댓글창 만들기</span><a href="#dbsqlite를-이용한-댓글창-만들기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>이번 포스팅에서는 지난 <a href="https://duckbankbok.github.io/posts/%EC%A1%B0%EC%BD%94%EB%94%A9-%EC%9B%B9%EA%B0%9C%EB%B0%9C-5%EC%A3%BC-%EC%99%84%EC%84%B1-4%EC%A3%BC%EC%B0%A8-%EB%A6%AC%EB%B7%B0/">4주차 리뷰</a>에서 다뤘던 <code class="language-plaintext highlighter-rouge">express</code> 모듈 말고도 <a href="https://www.npmjs.com/package/ejs"><code class="language-plaintext highlighter-rouge">ejs</code></a>, <a href="https://www.npmjs.com/package/sequelize"><code class="language-plaintext highlighter-rouge">sequelize</code></a> 등의 모듈들을 사용할 예정입니다. 우선 저번처럼 실습에 사용할 폴더와 파일을 다음과 같이 만들어 줍니다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>└── comments
    └── index.js
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">comments</code> 폴더를 드래그 &amp; 드랍하여 VS Code를 실행시키면 <code class="language-plaintext highlighter-rouge">comments</code> 폴더를 VS Code에서 열 수 있습니다. VS Code를 실행하셨다면 4주차 리뷰와 마찬가지로 npm을 통해 모듈을 다운받고, 관리하기 위해 터미널을 열어 다음과 같이 명령어를 입력합니다.</p><div class="language-terminal highlighter-rouge"><div class="code-header"> <span data-label-text="Terminal"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">&gt;</span>npm init
</pre></table></code></div></div><p>위 명령어를 입력하시면 모듈을 관리하기 위한 <code class="language-plaintext highlighter-rouge">package.json</code> 파일을 만들게 되며 이 때 필요한 정보를 입력해야 하는데 모두 <kbd>Enter</kbd>를 눌러 기본 설정으로 하셔도 무방합니다. <code class="language-plaintext highlighter-rouge">package.json</code> 파일을 만드는 데 성공하셨다면 다음은 모듈 설치입니다.</p><div class="language-terminal highlighter-rouge"><div class="code-header"> <span data-label-text="Terminal"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">&gt;</span>npm <span class="nb">install </span>express ejs sequelize sqlite3
</pre></table></code></div></div><p>모든 모듈들의 설치가 완료된 <code class="language-plaintext highlighter-rouge">comments</code> 폴더의 구성은 다음과 같습니다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>└── comments
    ├── node_modules
    ├── index.js
    ├── package-lock.json
    └── package.json
</pre></table></code></div></div><h3 id="ejs"><span class="mr-2">ejs</span><a href="#ejs" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="https://www.npmjs.com/package/ejs"><code class="language-plaintext highlighter-rouge">ejs</code></a> 모듈은 <strong>Embedded JavaScript templating</strong>의 약자로 HTML 기반으로 <code class="language-plaintext highlighter-rouge">script</code> 태그 없이 JavaScript를 실행시킬 수 있도록 하는 templating 언어입니다.</p><h3 id="sequelize"><span class="mr-2">sequelize</span><a href="#sequelize" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="https://www.npmjs.com/package/sequelize"><code class="language-plaintext highlighter-rouge">sequelize</code></a> 모듈은 Node.js 환경에서 DB 작업을 쉽게 할 수 있도록 도와주는 모듈입니다.</p><p>다음은 댓글창 구현을 위해 추가로 <code class="language-plaintext highlighter-rouge">comments</code> 폴더 안에 <code class="language-plaintext highlighter-rouge">views</code> 폴더를 만들고 그 안에 <code class="language-plaintext highlighter-rouge">index.ejs</code> 파일을 만들어 줍니다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>└── comments
    ├── node_modules
    ├── views
    │   └── index.ejs
    ├── index.js
    ├── package-lock.json
    └── package.json
</pre></table></code></div></div><p>이제 모든 준비가 끝났습니다. 실습을 진행하며 다음의 명령어를 통해 결과물을 로컬 서버에서 확인할 수 있으니 자주 확인해 보시기 바랍니다:)</p><div class="language-terminal highlighter-rouge"><div class="code-header"> <span data-label-text="Terminal"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">&gt;</span>node index.js
</pre></table></code></div></div><blockquote class="prompt-info"><div><p><em>로컬 서버를 종료하는 단축키는</em> <kbd>Ctrl</kbd>+<kbd>C</kbd> <em>입니다:)</em></p></div></blockquote><h3 id="create-댓글-생성"><span class="mr-2">Create (댓글 생성)</span><a href="#create-댓글-생성" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div file="index.js" class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="index.js"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
</pre><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="kd">const</span> <span class="p">{</span> <span class="nx">Sequelize</span><span class="p">,</span> <span class="nx">DataTypes</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">sequelize</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">sequelize</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Sequelize</span><span class="p">({</span>
  <span class="na">dialect</span><span class="p">:</span> <span class="dl">'</span><span class="s1">sqlite</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">storage</span><span class="p">:</span> <span class="dl">'</span><span class="s1">database.sqlite</span><span class="dl">'</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">Comments</span> <span class="o">=</span> <span class="nx">sequelize</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="dl">'</span><span class="s1">Comments</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="c1">// Model attributes are defined here</span>
  <span class="na">content</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="nx">DataTypes</span><span class="p">.</span><span class="nx">STRING</span><span class="p">,</span>
    <span class="na">allowNull</span><span class="p">:</span> <span class="kc">false</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="p">{</span>
  <span class="c1">// Other model options go here</span>
<span class="p">});</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">await</span> <span class="nx">Comments</span><span class="p">.</span><span class="nx">sync</span><span class="p">();</span>
<span class="p">})();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">urlencoded</span><span class="p">({</span> <span class="na">extended</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}));</span>

<span class="c1">// set the view engine to ejs</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">view engine</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">ejs</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// index page</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="dl">'</span><span class="s1">index</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/create</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">content</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">comment</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Comments</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span> <span class="na">content</span><span class="p">:</span> <span class="nx">content</span> <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Server is listening on port 3000</span><span class="dl">'</span><span class="p">);</span>
</pre></table></code></div></div><div file="views/index.ejs" class="language-html highlighter-rouge"><div class="code-header"> <span data-label-text="views/index.ejs"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"ko"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"X-UA-Compatible"</span> <span class="na">content=</span><span class="s">"IE=edge"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>댓글창 만들기<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/create"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"content"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"댓글 작성"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/form&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></table></code></div></div><p><strong>Create</strong>는 <code class="language-plaintext highlighter-rouge">views/index.ejs</code>의 <code class="language-plaintext highlighter-rouge">form</code> 태그에서 <code class="language-plaintext highlighter-rouge">post</code> 방식으로 댓글을 제출하면 백엔드에서 작성된 댓글 내용을 기반으로 DB에 새로운 댓글을 <strong><u>생성</u></strong>하는 방식으로 작동합니다. 위와 같이 코드를 입력하고 <code class="language-plaintext highlighter-rouge">index.js</code>를 실행하게 되면 <a href="http://localhost:3000/">로컬</a>에 다음과 같이 나타나게 됩니다.</p><p><img data-src="https://user-images.githubusercontent.com/64826387/210137534-b577b5b3-adbf-4073-b09e-5657aa9f3162.png" alt="Create" class="shadow" data-proofer-ignore></p><p>본 실습에서는 위와 같이 <code class="language-plaintext highlighter-rouge">안녕하세요</code>라는 댓글을 작성해 보겠습니다. <kbd>댓글 작성</kbd> 버튼을 누르게 되면 댓글 작성이 완료되는데 로컬 서버를 열며 생긴 <code class="language-plaintext highlighter-rouge">database.sqlite</code> 파일을 통해 다음과 같이 작성한 댓글이 DB에 제대로 생성됐는지 확인할 수 있습니다.</p><p><img data-src="https://user-images.githubusercontent.com/64826387/210137856-9f60b29c-46ea-4a99-b6a7-a0a668fdb8fd.png" alt="sqlite" data-proofer-ignore></p><h3 id="read-댓글-읽기"><span class="mr-2">Read (댓글 읽기)</span><a href="#read-댓글-읽기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>다음의 코드는 <strong>Read</strong> 기능이 추가된 코드입니다.</p><div file="index.js" class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="index.js"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
</pre><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="kd">const</span> <span class="p">{</span> <span class="nx">Sequelize</span><span class="p">,</span> <span class="nx">DataTypes</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">sequelize</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">sequelize</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Sequelize</span><span class="p">({</span>
  <span class="na">dialect</span><span class="p">:</span> <span class="dl">'</span><span class="s1">sqlite</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">storage</span><span class="p">:</span> <span class="dl">'</span><span class="s1">database.sqlite</span><span class="dl">'</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">Comments</span> <span class="o">=</span> <span class="nx">sequelize</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="dl">'</span><span class="s1">Comments</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="c1">// Model attributes are defined here</span>
  <span class="na">content</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="nx">DataTypes</span><span class="p">.</span><span class="nx">STRING</span><span class="p">,</span>
    <span class="na">allowNull</span><span class="p">:</span> <span class="kc">false</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="p">{</span>
  <span class="c1">// Other model options go here</span>
<span class="p">});</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">await</span> <span class="nx">Comments</span><span class="p">.</span><span class="nx">sync</span><span class="p">();</span>
<span class="p">})();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">urlencoded</span><span class="p">({</span> <span class="na">extended</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}));</span>

<span class="c1">// set the view engine to ejs</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">view engine</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">ejs</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// index page</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">comments</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Comments</span><span class="p">.</span><span class="nx">findAll</span><span class="p">();</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="dl">'</span><span class="s1">index</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">comments</span><span class="p">:</span> <span class="nx">comments</span> <span class="p">});</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/create</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">content</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">comment</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Comments</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span> <span class="na">content</span><span class="p">:</span> <span class="nx">content</span> <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Server is listening on port 3000</span><span class="dl">'</span><span class="p">);</span>
</pre></table></code></div></div><div class="language-diff nolineno highlighter-rouge"><div class="code-header"> <span data-label-text="Diff"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="gd">-(32) res.render('index');
</span><span class="gi">+(32) const comments = await Comments.findAll();
+(33) res.render('index', { comments: comments });
</span></pre></table></code></div></div><div file="views/index.ejs" class="language-html highlighter-rouge"><div class="code-header"> <span data-label-text="views/index.ejs"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"ko"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"X-UA-Compatible"</span> <span class="na">content=</span><span class="s">"IE=edge"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>댓글창 만들기<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>댓글 목록<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;</span><span class="err">%</span> <span class="na">for</span> <span class="err">(</span><span class="na">comment</span> <span class="na">of</span> <span class="na">comments</span><span class="err">)</span> <span class="err">{</span> <span class="err">%</span><span class="nt">&gt;</span>
        <span class="nt">&lt;li&gt;&lt;</span><span class="err">%=</span> <span class="na">comment.content</span> <span class="err">%</span><span class="nt">&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;</span><span class="err">%</span> <span class="err">}</span> <span class="err">%</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;hr&gt;</span>
    <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/create"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"content"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"댓글 작성"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/form&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></table></code></div></div><div class="language-diff nolineno highlighter-rouge"><div class="code-header"> <span data-label-text="Diff"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="gi">+(10) &lt;h1&gt;댓글 목록&lt;/h1&gt;
+(11) &lt;ul&gt;
+(12) &lt;% for (comment of comments) { %&gt;
+(13)     &lt;li&gt;&lt;%= comment.content %&gt;&lt;/li&gt;
+(14) &lt;% } %&gt;
+(15) &lt;/ul&gt;
+(16) &lt;hr&gt;
</span></pre></table></code></div></div><p><strong>Read</strong>는 <a href="http://localhost:3000/">메인 화면</a>으로 DB의 모든 댓글들을 전송해 화면에 띄워서 <strong><u>읽을 수 있게</u></strong> 만들어 줍니다. 이 때 기존의 실습에서 해왔듯이 (<em><a href="https://duckbankbok.github.io/posts/%EC%A1%B0%EC%BD%94%EB%94%A9-%EC%9B%B9%EA%B0%9C%EB%B0%9C-5%EC%A3%BC-%EC%99%84%EC%84%B1-3%EC%A3%BC%EC%B0%A8-%EB%A6%AC%EB%B7%B0(1)/#document-object-model-dom">3주차 리뷰(1)</a> 참조</em>) <strong>DOM</strong>을 활용하여 <code class="language-plaintext highlighter-rouge">script</code> 태그의 JavaScript 코드로 댓글을 추가하지 않고, <code class="language-plaintext highlighter-rouge">&lt;% %&gt;</code>과 <code class="language-plaintext highlighter-rouge">&lt;%= %&gt;</code> 안에 JavaScript 코드를 그대로 쓴 것을 확인하실 수 있으실 겁니다. 이는 앞서 소개한 <a href="https://www.npmjs.com/package/ejs"><code class="language-plaintext highlighter-rouge">ejs</code></a> 모듈의 기능으로 <code class="language-plaintext highlighter-rouge">&lt;% %&gt;</code>를 통해 <code class="language-plaintext highlighter-rouge">script</code> 태그 없이 JavaScript 코드를 작동하고, <code class="language-plaintext highlighter-rouge">&lt;%= %&gt;</code>를 통해 JavaScript 안의 변수값을 출력할 수 있습니다.</p><p>다음은 <code class="language-plaintext highlighter-rouge">index.js</code>의 실행 결과입니다.</p><p><img data-src="https://user-images.githubusercontent.com/64826387/210138139-6f18914c-2b77-4332-91c6-554a8b2ac6bc.png" alt="Read" class="shadow" data-proofer-ignore></p><h3 id="update-댓글-수정"><span class="mr-2">Update (댓글 수정)</span><a href="#update-댓글-수정" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>다음의 코드는 <strong>Update</strong> 기능이 추가된 코드입니다.</p><div file="index.js" class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="index.js"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
</pre><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="kd">const</span> <span class="p">{</span> <span class="nx">Sequelize</span><span class="p">,</span> <span class="nx">DataTypes</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">sequelize</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">sequelize</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Sequelize</span><span class="p">({</span>
  <span class="na">dialect</span><span class="p">:</span> <span class="dl">'</span><span class="s1">sqlite</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">storage</span><span class="p">:</span> <span class="dl">'</span><span class="s1">database.sqlite</span><span class="dl">'</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">Comments</span> <span class="o">=</span> <span class="nx">sequelize</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="dl">'</span><span class="s1">Comments</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="c1">// Model attributes are defined here</span>
  <span class="na">content</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="nx">DataTypes</span><span class="p">.</span><span class="nx">STRING</span><span class="p">,</span>
    <span class="na">allowNull</span><span class="p">:</span> <span class="kc">false</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="p">{</span>
  <span class="c1">// Other model options go here</span>
<span class="p">});</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">await</span> <span class="nx">Comments</span><span class="p">.</span><span class="nx">sync</span><span class="p">();</span>
<span class="p">})();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">urlencoded</span><span class="p">({</span> <span class="na">extended</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}));</span>

<span class="c1">// set the view engine to ejs</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">view engine</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">ejs</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// index page</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">comments</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Comments</span><span class="p">.</span><span class="nx">findAll</span><span class="p">();</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="dl">'</span><span class="s1">index</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">comments</span><span class="p">:</span> <span class="nx">comments</span> <span class="p">});</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/create</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">content</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">comment</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Comments</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span> <span class="na">content</span><span class="p">:</span> <span class="nx">content</span> <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/update/:id</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">content</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">id</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">;</span>
  <span class="k">await</span> <span class="nx">Comments</span><span class="p">.</span><span class="nx">update</span><span class="p">({</span> <span class="na">content</span><span class="p">:</span> <span class="nx">content</span> <span class="p">},</span> <span class="p">{</span>
    <span class="na">where</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="nx">id</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Server is listening on port 3000</span><span class="dl">'</span><span class="p">);</span>
</pre></table></code></div></div><div class="language-diff nolineno highlighter-rouge"><div class="code-header"> <span data-label-text="Diff"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="gi">+(43) app.post('/update/:id', async function(req, res) {
+(44) const { content } = req.body;
+(45) const { id } = req.params;
+(46) await Comments.update({ content: content }, {
+(47)   where: {
+(48)     id: id
+(49)   }
+(50) });
+(51)
+(52) res.redirect('/')
+(53) });
</span></pre></table></code></div></div><div file="views/index.ejs" class="language-html highlighter-rouge"><div class="code-header"> <span data-label-text="views/index.ejs"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"ko"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"X-UA-Compatible"</span> <span class="na">content=</span><span class="s">"IE=edge"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>댓글창 만들기<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>댓글 목록<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;</span><span class="err">%</span> <span class="na">for</span> <span class="err">(</span><span class="na">comment</span> <span class="na">of</span> <span class="na">comments</span><span class="err">)</span> <span class="err">{</span> <span class="err">%</span><span class="nt">&gt;</span>
        <span class="nt">&lt;li&gt;&lt;</span><span class="err">%=</span> <span class="na">comment.content</span> <span class="err">%</span><span class="nt">&gt;&lt;/li&gt;</span>
        <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/update/&lt;%= comment.id %&gt;"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"content"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"댓글 수정"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/form&gt;</span>
    <span class="nt">&lt;</span><span class="err">%</span> <span class="err">}</span> <span class="err">%</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;hr&gt;</span>
    <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/create"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"content"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"댓글 작성"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/form&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></table></code></div></div><div class="language-diff nolineno highlighter-rouge"><div class="code-header"> <span data-label-text="Diff"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="gi">+(14) &lt;form action="/update/&lt;%= comment.id %&gt;" method="post"&gt;
+(15)     &lt;input type="text" name="content"&gt;
+(16)     &lt;input type="submit" value="댓글 수정"&gt;
+(17) &lt;/form&gt;
</span></pre></table></code></div></div><p><strong>Update</strong>는 <strong>Create</strong>와 마찬가지로 <code class="language-plaintext highlighter-rouge">views/index.ejs</code>의 <code class="language-plaintext highlighter-rouge">form</code> 태그에서 <code class="language-plaintext highlighter-rouge">post</code> 방식으로 댓글을 <strong><u>업데이트</u></strong>하면 해당 댓글의 <code class="language-plaintext highlighter-rouge">id</code>를 통해 DB 안에 같은 <code class="language-plaintext highlighter-rouge">id</code>를 가진 댓글을 수정하는 방식으로 작동합니다.</p><p>다음은 <code class="language-plaintext highlighter-rouge">index.js</code>의 실행 결과입니다.</p><p><img data-src="https://user-images.githubusercontent.com/64826387/210138750-11784245-3355-4898-a6e6-750cce6e6cb0.png" alt="Update" class="shadow" data-proofer-ignore></p><p>위의 <kbd>댓글 수정</kbd> 버튼을 누르게 되면 <code class="language-plaintext highlighter-rouge">안녕하세요</code>라는 댓글이 <code class="language-plaintext highlighter-rouge">반가워요</code>로 바뀌게 됩니다.</p><h3 id="delete-댓글-삭제"><span class="mr-2">Delete (댓글 삭제)</span><a href="#delete-댓글-삭제" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>다음의 코드는 <strong>Delete</strong> 기능이 추가되어 <strong>CRUD</strong>가 모두 적용된 코드입니다.</p><div file="index.js" class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="index.js"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
</pre><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="kd">const</span> <span class="p">{</span> <span class="nx">Sequelize</span><span class="p">,</span> <span class="nx">DataTypes</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">sequelize</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">sequelize</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Sequelize</span><span class="p">({</span>
  <span class="na">dialect</span><span class="p">:</span> <span class="dl">'</span><span class="s1">sqlite</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">storage</span><span class="p">:</span> <span class="dl">'</span><span class="s1">database.sqlite</span><span class="dl">'</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">Comments</span> <span class="o">=</span> <span class="nx">sequelize</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="dl">'</span><span class="s1">Comments</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="c1">// Model attributes are defined here</span>
  <span class="na">content</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="nx">DataTypes</span><span class="p">.</span><span class="nx">STRING</span><span class="p">,</span>
    <span class="na">allowNull</span><span class="p">:</span> <span class="kc">false</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="p">{</span>
  <span class="c1">// Other model options go here</span>
<span class="p">});</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">await</span> <span class="nx">Comments</span><span class="p">.</span><span class="nx">sync</span><span class="p">();</span>
<span class="p">})();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">urlencoded</span><span class="p">({</span> <span class="na">extended</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}));</span>

<span class="c1">// set the view engine to ejs</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">view engine</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">ejs</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// index page</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">comments</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Comments</span><span class="p">.</span><span class="nx">findAll</span><span class="p">();</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="dl">'</span><span class="s1">index</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">comments</span><span class="p">:</span> <span class="nx">comments</span> <span class="p">});</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/create</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">content</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">comment</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Comments</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span> <span class="na">content</span><span class="p">:</span> <span class="nx">content</span> <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/update/:id</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">content</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">id</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">;</span>
  <span class="k">await</span> <span class="nx">Comments</span><span class="p">.</span><span class="nx">update</span><span class="p">({</span> <span class="na">content</span><span class="p">:</span> <span class="nx">content</span> <span class="p">},</span> <span class="p">{</span>
    <span class="na">where</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="nx">id</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/delete/:id</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">id</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">;</span>
  <span class="k">await</span> <span class="nx">Comments</span><span class="p">.</span><span class="nx">destroy</span><span class="p">({</span>
    <span class="na">where</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="nx">id</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Server is listening on port 3000</span><span class="dl">'</span><span class="p">);</span>
</pre></table></code></div></div><div class="language-diff nolineno highlighter-rouge"><div class="code-header"> <span data-label-text="Diff"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="gi">+(55) app.post('/delete/:id', async function(req, res) {
+(56)   const { id } = req.params;
+(57)   await Comments.destroy({
+(58)     where: {
+(59)       id: id
+(60)     }
+(61)   });
+(62) 
+(63)   res.redirect('/')
+(64) });
</span></pre></table></code></div></div><div file="views/index.ejs" class="language-html highlighter-rouge"><div class="code-header"> <span data-label-text="views/index.ejs"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre><td class="rouge-code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"ko"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"X-UA-Compatible"</span> <span class="na">content=</span><span class="s">"IE=edge"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>댓글창 만들기<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>댓글 목록<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;</span><span class="err">%</span> <span class="na">for</span> <span class="err">(</span><span class="na">comment</span> <span class="na">of</span> <span class="na">comments</span><span class="err">)</span> <span class="err">{</span> <span class="err">%</span><span class="nt">&gt;</span>
        <span class="nt">&lt;li&gt;&lt;</span><span class="err">%=</span> <span class="na">comment.content</span> <span class="err">%</span><span class="nt">&gt;&lt;/li&gt;</span>
        <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/update/&lt;%= comment.id %&gt;"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"content"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"댓글 수정"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/form&gt;</span>
        <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/delete/&lt;%= comment.id %&gt;"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"댓글 삭제"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/form&gt;</span>
    <span class="nt">&lt;</span><span class="err">%</span> <span class="err">}</span> <span class="err">%</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;hr&gt;</span>
    <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/create"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"content"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"댓글 작성"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/form&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></table></code></div></div><div class="language-diff nolineno highlighter-rouge"><div class="code-header"> <span data-label-text="Diff"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="gi">+(18) &lt;form action="/delete/&lt;%= comment.id %&gt;" method="post"&gt;
+(19)     &lt;input type="submit" value="댓글 삭제"&gt;
+(20) &lt;/form&gt;
</span></pre></table></code></div></div><p><strong>Delete</strong>는 해당 댓글의 <code class="language-plaintext highlighter-rouge">id</code>를 통해 DB 안에 같은 <code class="language-plaintext highlighter-rouge">id</code>를 가진 댓글을 <strong><u>삭제</u></strong>하는 방식으로 작동합니다.</p><p>다음은 <code class="language-plaintext highlighter-rouge">index.js</code>의 실행 결과입니다.</p><p><img data-src="https://user-images.githubusercontent.com/64826387/210138956-5e114967-44ae-4d9b-ae2e-3e8b4c639ee3.png" alt="Delete" class="shadow" data-proofer-ignore></p><p>위 화면에서 <kbd>댓글 삭제</kbd> 버튼을 누르게 되면 <code class="language-plaintext highlighter-rouge">반가워요</code> 댓글은 DB에서 삭제됩니다.</p><p>긴 글 읽어주셔서 항상 감사합니다:)</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%EC%A1%B0%EC%BD%94%EB%94%A9/'>조코딩</a>, <a href='/categories/%EC%9B%B9%EA%B0%9C%EB%B0%9C-5%EC%A3%BC-%EC%99%84%EC%84%B1/'>웹개발 5주 완성</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/%EC%A1%B0%EC%BD%94%EB%94%A9/" class="post-tag no-text-decoration" >조코딩</a> <a href="/tags/%EC%9B%B9%EA%B0%9C%EB%B0%9C-5%EC%A3%BC-%EC%99%84%EC%84%B1/" class="post-tag no-text-decoration" >웹개발 5주 완성</a> <a href="/tags/5%EC%A3%BC%EC%B0%A8/" class="post-tag no-text-decoration" >5주차</a> <a href="/tags/%EB%A6%AC%EB%B7%B0/" class="post-tag no-text-decoration" >리뷰</a> <a href="/tags/crud/" class="post-tag no-text-decoration" >crud</a> <a href="/tags/db/" class="post-tag no-text-decoration" >db</a> <a href="/tags/sqlite/" class="post-tag no-text-decoration" >sqlite</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%EC%A1%B0%EC%BD%94%EB%94%A9+%EC%9B%B9%EA%B0%9C%EB%B0%9C+5%EC%A3%BC+%EC%99%84%EC%84%B1+5%EC%A3%BC%EC%B0%A8+%EB%A6%AC%EB%B7%B0_CRUD%2C+DB%28SQLite%29%EB%A5%BC+%EC%9D%B4%EC%9A%A9%ED%95%9C+%EB%8C%93%EA%B8%80%EC%B0%BD+%EB%A7%8C%EB%93%A4%EA%B8%B0+-+%EB%80%A8%EB%A1%9C%EA%B7%B8+%28GGyulog%29&url=https%3A%2F%2Fduckbankbok.github.io%2Fposts%2F%25EC%25A1%25B0%25EC%25BD%2594%25EB%2594%25A9-%25EC%259B%25B9%25EA%25B0%259C%25EB%25B0%259C-5%25EC%25A3%25BC-%25EC%2599%2584%25EC%2584%25B1-5%25EC%25A3%25BC%25EC%25B0%25A8-%25EB%25A6%25AC%25EB%25B7%25B0%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%EC%A1%B0%EC%BD%94%EB%94%A9+%EC%9B%B9%EA%B0%9C%EB%B0%9C+5%EC%A3%BC+%EC%99%84%EC%84%B1+5%EC%A3%BC%EC%B0%A8+%EB%A6%AC%EB%B7%B0_CRUD%2C+DB%28SQLite%29%EB%A5%BC+%EC%9D%B4%EC%9A%A9%ED%95%9C+%EB%8C%93%EA%B8%80%EC%B0%BD+%EB%A7%8C%EB%93%A4%EA%B8%B0+-+%EB%80%A8%EB%A1%9C%EA%B7%B8+%28GGyulog%29&u=https%3A%2F%2Fduckbankbok.github.io%2Fposts%2F%25EC%25A1%25B0%25EC%25BD%2594%25EB%2594%25A9-%25EC%259B%25B9%25EA%25B0%259C%25EB%25B0%259C-5%25EC%25A3%25BC-%25EC%2599%2584%25EC%2584%25B1-5%25EC%25A3%25BC%25EC%25B0%25A8-%25EB%25A6%25AC%25EB%25B7%25B0%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fduckbankbok.github.io%2Fposts%2F%25EC%25A1%25B0%25EC%25BD%2594%25EB%2594%25A9-%25EC%259B%25B9%25EA%25B0%259C%25EB%25B0%259C-5%25EC%25A3%25BC-%25EC%2599%2584%25EC%2584%25B1-5%25EC%25A3%25BC%25EC%25B0%25A8-%25EB%25A6%25AC%25EB%25B7%25B0%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div><div onclick="handleAdClick(event)"> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7693574899621117" crossorigin="anonymous"></script> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7693574899621117" data-ad-slot="3690161860" data-ad-format="auto" data-full-width-responsive="true"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script></div><script> // 광고 클릭을 처리하는 함수 function handleAdClick(event) { const maxClicks = 3; // 사용자가 허용된 최대 클릭 횟수 const clickInterval = 24 * 60 * 60 * 1000; // 클릭 기록을 유지할 시간 (24시간) // 현재 시간 const now = new Date().getTime(); // 로컬 스토리지에서 클릭 기록을 가져옴 let adClicks = JSON.parse(localStorage.getItem('adClicks')) || []; // 유효하지 않은 기록 제거 adClicks = adClicks.filter(clickTime => now - clickTime < clickInterval); if (adClicks.length >= maxClicks) { alert('Invalid traffic detected.'); event.preventDefault(); return false; } else { // 현재 클릭 시간 추가 adClicks.push(now); localStorage.setItem('adClicks', JSON.stringify(adClicks)); } } </script></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/%EB%A9%94%EC%9D%B4%ED%94%8C%EC%8A%A4%ED%86%A0%EB%A6%AC-%EC%9B%94%EB%93%9C-%EB%B0%B0%EC%A7%80-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0/">메이플스토리 월드 | 배지 추가하기</a><li><a href="/posts/%EC%A1%B0%EC%BD%94%EB%94%A9-%EC%9B%B9%EA%B0%9C%EB%B0%9C-5%EC%A3%BC-%EC%99%84%EC%84%B1-3%EC%A3%BC%EC%B0%A8-%EB%A6%AC%EB%B7%B0(1)/">조코딩 웹개발 5주 완성 3주차 리뷰(1)_JavaScript</a><li><a href="/posts/%EC%9B%B9-%EA%B8%B0%EB%B0%98-%EC%98%A4%EB%8D%B8%EB%A1%9C-%EA%B2%8C%EC%9E%84-%EB%A7%8C%EB%93%A4%EA%B8%B0/">웹 기반(HTML, CSS, JavaScript) 게임 만들기 - Othello</a><li><a href="/posts/%EC%9B%B9-%EA%B8%B0%EB%B0%98-rpg-%EA%B2%8C%EC%9E%84-%EB%A7%8C%EB%93%A4%EA%B8%B0/">웹 기반(HTML, CSS, JavaScript) RPG 만들기 - Life of YOUNGGYU</a><li><a href="/posts/solving-traveling-salesman-problem-using-genetic-algorithm-in-python/">Solving Traveling Salesman Problem (TSP) using Genetic Algorithm (GA) in Python</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/%EB%A6%AC%EB%B7%B0/">리뷰</a> <a class="post-tag" href="/tags/%EC%9B%B9%EA%B0%9C%EB%B0%9C-5%EC%A3%BC-%EC%99%84%EC%84%B1/">웹개발 5주 완성</a> <a class="post-tag" href="/tags/%EC%A1%B0%EC%BD%94%EB%94%A9/">조코딩</a> <a class="post-tag" href="/tags/or/">or</a> <a class="post-tag" href="/tags/2%EC%A3%BC%EC%B0%A8/">2주차</a> <a class="post-tag" href="/tags/3%EC%A3%BC%EC%B0%A8/">3주차</a> <a class="post-tag" href="/tags/lua/">lua</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/1%EC%A3%BC%EC%B0%A8/">1주차</a> <a class="post-tag" href="/tags/4%EC%A3%BC%EC%B0%A8/">4주차</a></div></div></div><div style="margin-bottom: 4rem" onclick="handleAdClick(event)"> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7693574899621117" crossorigin="anonymous"></script> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7693574899621117" data-ad-slot="5334701432" data-ad-format="auto" data-full-width-responsive="true"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/%EC%A1%B0%EC%BD%94%EB%94%A9-%EC%9B%B9%EA%B0%9C%EB%B0%9C-5%EC%A3%BC-%EC%99%84%EC%84%B1-3%EC%A3%BC%EC%B0%A8-%EB%A6%AC%EB%B7%B0(2)/"><div class="card-body"> <em class="small" data-ts="1661698800" data-df="ll" > Aug 29, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>조코딩 웹개발 5주 완성 3주차 리뷰(2)_API, 포켓몬 API를 활용한 포켓몬 도감 만들기</h3><div class="text-muted small"><p> API API는 Application Programming Interface의 약자로 쉽게 말해 앱이 프로그래밍 언어로 상호작용 할 때의 규칙을 의미합니다. 우리는 API라고 명시된 규칙에 맞게 서버에 요청을 보내면 서버는 이에 맞는 데이터나 기능들을 전달하여 응답합니다. 이미지 출처: https://velog.io/@0andwild/API-%EB...</p></div></div></a></div><div class="card"> <a href="/posts/%EC%A1%B0%EC%BD%94%EB%94%A9-%EC%9B%B9%EA%B0%9C%EB%B0%9C-5%EC%A3%BC-%EC%99%84%EC%84%B1-4%EC%A3%BC%EC%B0%A8-%EB%A6%AC%EB%B7%B0/"><div class="card-body"> <em class="small" data-ts="1664798400" data-df="ll" > Oct 3, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>조코딩 웹개발 5주 완성 4주차 리뷰_Node.js, 로또 번호 생성 API 만들기</h3><div class="text-muted small"><p> 본 포스팅에서는 조코딩님 강의에서 다뤘던 동물 울음소리 API가 아닌 다른 API 만드는 것을 실습해 보고자 하니 참고 부탁드립니다:) Node.js Node.js는 JavaScript로 브라우저 밖에서 서버를 구축하는 등의 코드를 실행할 수 있게 해주는 런타임 환경입니다. 본 실습에서 만들 로또 번호 생성 API의 서버는 Node.js ...</p></div></div></a></div><div class="card"> <a href="/posts/%EC%A1%B0%EC%BD%94%EB%94%A9-%EC%9B%B9%EA%B0%9C%EB%B0%9C-5%EC%A3%BC-%EC%99%84%EC%84%B1-1%EC%A3%BC%EC%B0%A8-%EB%A6%AC%EB%B7%B0/"><div class="card-body"> <em class="small" data-ts="1658728800" data-df="ll" > Jul 25, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>조코딩 웹개발 5주 완성 1주차 리뷰_기본 개념, HTML, Deploy</h3><div class="text-muted small"><p> 들어가기에 앞서 안녕하세요! 저는 2020년부터 웹에 대한 공부를 시작한 대학원생입니다. 웹을 공부하기 시작했을 당시에는 직접 웹사이트도 만들어보고, 해커톤도 나가는 등의 활동들을 했었지만 대학원 입시를 준비하면서 웹에 대한 관심이 시들시들해졌습니다. 올해 대학원에 들어오고 나서 전공 공부에 대한 연장선 겸 웹에 대한 공부를 이어나가고자 깃헙 블로그...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%EC%A1%B0%EC%BD%94%EB%94%A9-%EC%9B%B9%EA%B0%9C%EB%B0%9C-5%EC%A3%BC-%EC%99%84%EC%84%B1-4%EC%A3%BC%EC%B0%A8-%EB%A6%AC%EB%B7%B0/" class="btn btn-outline-primary" prompt="Older"><p>조코딩 웹개발 5주 완성 4주차 리뷰_Node.js, 로또 번호 생성 API 만들기</p></a> <a href="/posts/%EC%9B%B9-%EA%B8%B0%EB%B0%98-%EC%98%A4%EB%8D%B8%EB%A1%9C-%EA%B2%8C%EC%9E%84-%EB%A7%8C%EB%93%A4%EA%B8%B0/" class="btn btn-outline-primary" prompt="Newer"><p>웹 기반(HTML, CSS, JavaScript) 게임 만들기 - Othello</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "duckbankbok/duckbankbok.github.io", "data-repo-id": "R_kgDOHdHcGA", "data-category": "General", "data-category-id": "DIC_kwDOHdHcGM4CPfs1", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/%EB%A6%AC%EB%B7%B0/">리뷰</a> <a class="post-tag" href="/tags/%EC%9B%B9%EA%B0%9C%EB%B0%9C-5%EC%A3%BC-%EC%99%84%EC%84%B1/">웹개발 5주 완성</a> <a class="post-tag" href="/tags/%EC%A1%B0%EC%BD%94%EB%94%A9/">조코딩</a> <a class="post-tag" href="/tags/or/">or</a> <a class="post-tag" href="/tags/2%EC%A3%BC%EC%B0%A8/">2주차</a> <a class="post-tag" href="/tags/3%EC%A3%BC%EC%B0%A8/">3주차</a> <a class="post-tag" href="/tags/lua/">lua</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/1%EC%A3%BC%EC%B0%A8/">1주차</a> <a class="post-tag" href="/tags/4%EC%A3%BC%EC%B0%A8/">4주차</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://github.com/duckbankbok">복영규(Younggyu Bok)</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-T1XDWH4GQJ"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-T1XDWH4GQJ'); }); </script>
