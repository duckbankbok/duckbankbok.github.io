---
title: ì¡°ì½”ë”© ì›¹ê°œë°œ 5ì£¼ ì™„ì„± 5ì£¼ì°¨ ë¦¬ë·°_CRUD, DB(SQLite)ë¥¼ ì´ìš©í•œ ëŒ“ê¸€ì°½ ë§Œë“¤ê¸°
date: 2022-12-31 12:00:00 +0900
categories: [ì¡°ì½”ë”©, ì›¹ê°œë°œ 5ì£¼ ì™„ì„±]
tags: [ì¡°ì½”ë”©, ì›¹ê°œë°œ 5ì£¼ ì™„ì„±, 5ì£¼ì°¨, ë¦¬ë·°, crud, db, sqlite]     # TAG names should always be lowercase
image: https://yt3.ggpht.com/JuRcVt9OFQgqh7UL1LjihpVLEbjdNXt3tGq-IQfqRMT8wVXgWg_tzyz0S_GVsgqkB3ucBC5fqeY=s900-c-k-c0x00ffffff-no-rj
---

## ë“¤ì–´ê°€ê¸°ì— ì•ì„œ

ì•ˆë…•í•˜ì„¸ìš”!
ì˜¤ëœë§Œì— ì¸ì‚¬ë“œë¦½ë‹ˆë‹¤ :)
ì§€ë‚œ ì—¬ë¦„ë°©í•™ì— ì‹œì‘í•œ ì¡°ì½”ë”©ë‹˜ ì›¹ê°œë°œ ê°•ì˜ ë¦¬ë·°ë¥¼ ë°”ìœ ì¼ë¡œ ë¯¸ë£¨ê³  ë¯¸ë£¨ë‹¤ ê²°êµ­ ê²¨ìš¸ë°©í•™ì— ë§ˆë¬´ë¦¬í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
ì˜¬í•´ëŠ” ì¡°ì½”ë”©ë‹˜ ì›¹ê°œë°œ ê°•ì˜ ë¦¬ë·° í¬ìŠ¤íŒ…ì„ í•˜ë©´ì„œ ë” ë§ì€ ë°©ë¬¸ìë¥¼ ì–»ì„ ìˆ˜ ìˆì—ˆê³ , êµ¬ê¸€ ì• ë“œì„¼ìŠ¤ë„ ë¸”ë¡œê·¸ì— ê±¸ ìˆ˜ ìˆê²Œ ë˜ì–´ ë§¤ìš° ë¿Œë“¯í•œ í•´ì˜€ìŠµë‹ˆë‹¤.
ì°¾ì•„ì™€ ì£¼ì…”ì„œ ê°ì‚¬ë“œë¦¬ê³ , ë‚´ë…„ì—ë„ ë‹¤ì–‘í•œ ì£¼ì œë¡œ í¬ìŠ¤íŒ… í•˜ê² ìŠµë‹ˆë‹¤ğŸ˜

## CRUD

![CRUD](https://miro.medium.com/max/720/1*2eBdh0vLZjUyCDF6x1EqvQ.webp)_ì´ë¯¸ì§€ ì¶œì²˜: [Medium](https://medium.com/geekculture/crud-operations-explained-2a44096e9c88)_

> **C**reate, **R**ead, **U**pdate, **D**elete
{: .prompt-info }

**CRUD**ëŠ” ëŒ€ë¶€ë¶„ì˜ ì»´í“¨í„° ì†Œí”„íŠ¸ì›¨ì–´ê°€ ê°€ì§€ëŠ” ê¸°ë³¸ì ì¸ ë°ì´í„° ì²˜ë¦¬ ê¸°ëŠ¥ì¸ Create(ìƒì„±), Read(ì½ê¸°), Update(ê°±ì‹ ), Delete(ì‚­ì œ)ë¥¼ ë¬¶ì–´ì„œ ì¼ì»«ëŠ” ë§ì…ë‹ˆë‹¤ ([ìœ„í‚¤ë°±ê³¼](https://ko.wikipedia.org/wiki/CRUD)).
ëŒ€ë¶€ë¶„ì˜ ì›¹ì‚¬ì´íŠ¸ì—ì„œ CRUDë¥¼ í™œìš©í•œ ì„œë¹„ìŠ¤ë“¤ì„ ì œê³µí•˜ê¸° ë•Œë¬¸ì— ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” ì¡°ì½”ë”©ë‹˜ì´ ë§Œë“¤ì—ˆë˜ ëŒ“ê¸€ì°½ì„ ë‹¤ì‹œ ë§Œë“¤ì–´ë³´ë©° CRUDë¥¼ ì§ì ‘ ì‹¤ìŠµí•´ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

## DB(SQLite)ë¥¼ ì´ìš©í•œ ëŒ“ê¸€ì°½ ë§Œë“¤ê¸°

ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” ì§€ë‚œ [4ì£¼ì°¨ ë¦¬ë·°](https://duckbankbok.github.io/posts/%EC%A1%B0%EC%BD%94%EB%94%A9-%EC%9B%B9%EA%B0%9C%EB%B0%9C-5%EC%A3%BC-%EC%99%84%EC%84%B1-4%EC%A3%BC%EC%B0%A8-%EB%A6%AC%EB%B7%B0/)ì—ì„œ ë‹¤ë¤˜ë˜ `express` ëª¨ë“ˆ ë§ê³ ë„ [`ejs`](https://www.npmjs.com/package/ejs), [`sequelize`](https://www.npmjs.com/package/sequelize) ë“±ì˜ ëª¨ë“ˆë“¤ì„ ì‚¬ìš©í•  ì˜ˆì •ì…ë‹ˆë‹¤.
ìš°ì„  ì €ë²ˆì²˜ëŸ¼ ì‹¤ìŠµì— ì‚¬ìš©í•  í´ë”ì™€ íŒŒì¼ì„ ë‹¤ìŒê³¼ ê°™ì´ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤.

```
â””â”€â”€ comments
    â””â”€â”€ index.js
```

`comments` í´ë”ë¥¼ ë“œë˜ê·¸ & ë“œëí•˜ì—¬ VS Codeë¥¼ ì‹¤í–‰ì‹œí‚¤ë©´ `comments` í´ë”ë¥¼ VS Codeì—ì„œ ì—´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
VS Codeë¥¼ ì‹¤í–‰í•˜ì…¨ë‹¤ë©´ 4ì£¼ì°¨ ë¦¬ë·°ì™€ ë§ˆì°¬ê°€ì§€ë¡œ npmì„ í†µí•´ ëª¨ë“ˆì„ ë‹¤ìš´ë°›ê³ , ê´€ë¦¬í•˜ê¸° ìœ„í•´ í„°ë¯¸ë„ì„ ì—´ì–´ ë‹¤ìŒê³¼ ê°™ì´ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.

```terminal
>npm init
```

ìœ„ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì‹œë©´ ëª¨ë“ˆì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ `package.json` íŒŒì¼ì„ ë§Œë“¤ê²Œ ë˜ë©° ì´ ë•Œ í•„ìš”í•œ ì •ë³´ë¥¼ ì…ë ¥í•´ì•¼ í•˜ëŠ”ë° ëª¨ë‘ <kbd>Enter</kbd>ë¥¼ ëˆŒëŸ¬ ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œ í•˜ì…”ë„ ë¬´ë°©í•©ë‹ˆë‹¤.
`package.json` íŒŒì¼ì„ ë§Œë“œëŠ” ë° ì„±ê³µí•˜ì…¨ë‹¤ë©´ ë‹¤ìŒì€ ëª¨ë“ˆ ì„¤ì¹˜ì…ë‹ˆë‹¤.

```terminal
>npm install express ejs sequelize sqlite3
```

ëª¨ë“  ëª¨ë“ˆë“¤ì˜ ì„¤ì¹˜ê°€ ì™„ë£Œëœ `comments` í´ë”ì˜ êµ¬ì„±ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```
â””â”€â”€ comments
    â”œâ”€â”€ node_modules
    â”œâ”€â”€ index.js
    â”œâ”€â”€ package-lock.json
    â””â”€â”€ package.json
```

### ejs

[`ejs`](https://www.npmjs.com/package/ejs) ëª¨ë“ˆì€ **Embedded JavaScript templating**ì˜ ì•½ìë¡œ HTML ê¸°ë°˜ìœ¼ë¡œ `script` íƒœê·¸ ì—†ì´ JavaScriptë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆë„ë¡ í•˜ëŠ” templating ì–¸ì–´ì…ë‹ˆë‹¤.

### sequelize

[`sequelize`](https://www.npmjs.com/package/sequelize) ëª¨ë“ˆì€ Node.js í™˜ê²½ì—ì„œ DB ì‘ì—…ì„ ì‰½ê²Œ í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.

ë‹¤ìŒì€ ëŒ“ê¸€ì°½ êµ¬í˜„ì„ ìœ„í•´ ì¶”ê°€ë¡œ `comments` í´ë” ì•ˆì— `views` í´ë”ë¥¼ ë§Œë“¤ê³  ê·¸ ì•ˆì— `index.ejs` íŒŒì¼ì„ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤.

```
â””â”€â”€ comments
    â”œâ”€â”€ node_modules
    â”œâ”€â”€ views
    â”‚   â””â”€â”€ index.ejs
    â”œâ”€â”€ index.js
    â”œâ”€â”€ package-lock.json
    â””â”€â”€ package.json
```

ì´ì œ ëª¨ë“  ì¤€ë¹„ê°€ ëë‚¬ìŠµë‹ˆë‹¤.
ì‹¤ìŠµì„ ì§„í–‰í•˜ë©° ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ ê²°ê³¼ë¬¼ì„ ë¡œì»¬ ì„œë²„ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë‹ˆ ìì£¼ í™•ì¸í•´ ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤ :)

```terminal
>npm index.js
```

### Create (ëŒ“ê¸€ ìƒì„±)

**Create**ëŠ” ë‹¤ìŒì˜ ì½”ë“œë¡œ ì‘ë™í•˜ê²Œ ë©ë‹ˆë‹¤.

```javascript
var express = require('express');
var app = express();

const { Sequelize, DataTypes } = require('sequelize');
const sequelize = new Sequelize({
  dialect: 'sqlite',
  storage: 'database.sqlite'
});

const Comments = sequelize.define('Comments', {
  // Model attributes are defined here
  content: {
    type: DataTypes.STRING,
    allowNull: false
  }
}, {
  // Other model options go here
});

(async () => {
  await Comments.sync();
})();

app.use(express.json());
app.use(express.urlencoded({ extended: true }));

// set the view engine to ejs
app.set('view engine', 'ejs');

// index page
app.get('/', async function(req, res) {
  res.render('index');
});

app.post('/create', async function(req, res) {
  const { content } = req.body;
  const comment = await Comments.create({ content: content });

  res.redirect('/')
});

app.listen(3000);
console.log('Server is listening on port 3000');
```
{: file="index.js"}

```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëŒ“ê¸€ì°½ ë§Œë“¤ê¸°</title>
</head>
<body>
    <form action="/create" method="post">
        <input type="text" name="content">
        <input type="submit" value="ëŒ“ê¸€ ì‘ì„±">
    </form>
</body>
</html>
```
{: file="views/index.ejs"}

ìœ„ì˜ ì½”ë“œë¥¼ ì…ë ¥í•˜ê³  `index.js`ë¥¼ ì‹¤í–‰í•˜ê²Œ ë˜ë©´ [ë¡œì»¬](http://localhost:3000/)ì— ë‹¤ìŒê³¼ ê°™ì´ ë‚˜íƒ€ë‚˜ê²Œ ë©ë‹ˆë‹¤.

![Create](https://user-images.githubusercontent.com/64826387/210137534-b577b5b3-adbf-4073-b09e-5657aa9f3162.png){: .shadow }

ë³¸ ì‹¤ìŠµì—ì„œëŠ” ìœ„ì™€ ê°™ì´ `ì•ˆë…•í•˜ì„¸ìš”`ë¼ëŠ” ëŒ“ê¸€ì„ ì‘ì„±í•´ ë³´ê² ìŠµë‹ˆë‹¤.
<kbd>ëŒ“ê¸€ ì‘ì„±</kbd> ë²„íŠ¼ì„ ëˆ„ë¥´ê²Œ ë˜ë©´ ëŒ“ê¸€ ì‘ì„±ì´ ì™„ë£Œë˜ëŠ”ë° ë¡œì»¬ ì„œë²„ë¥¼ ì—´ë©° ìƒê¸´ `database.sqlite` íŒŒì¼ì„ í†µí•´ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•œ ëŒ“ê¸€ì´ DBì— ì œëŒ€ë¡œ ìƒì„±ëëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![sqlite](https://user-images.githubusercontent.com/64826387/210137856-9f60b29c-46ea-4a99-b6a7-a0a668fdb8fd.png)

### Read (ëŒ“ê¸€ ì½ê¸°)

ë‹¤ìŒì˜ ì½”ë“œëŠ” **Read** ê¸°ëŠ¥ì´ ì¶”ê°€ëœ ì½”ë“œì…ë‹ˆë‹¤.

```javascript
var express = require('express');
var app = express();

const { Sequelize, DataTypes } = require('sequelize');
const sequelize = new Sequelize({
  dialect: 'sqlite',
  storage: 'database.sqlite'
});

const Comments = sequelize.define('Comments', {
  // Model attributes are defined here
  content: {
    type: DataTypes.STRING,
    allowNull: false
  }
}, {
  // Other model options go here
});

(async () => {
  await Comments.sync();
})();

app.use(express.json());
app.use(express.urlencoded({ extended: true }));

// set the view engine to ejs
app.set('view engine', 'ejs');

// index page
app.get('/', async function(req, res) {
  const comments = await Comments.findAll();
  res.render('index', { comments: comments });
});

app.post('/create', async function(req, res) {
  const { content } = req.body;
  const comment = await Comments.create({ content: content });

  res.redirect('/')
});

app.listen(3000);
console.log('Server is listening on port 3000');
```
{: file="index.js"}

```diff
- res.render('index');
+ const comments = await Comments.findAll();
+ res.render('index', { comments: comments });
```
{: .nolineno }

```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëŒ“ê¸€ì°½ ë§Œë“¤ê¸°</title>
</head>
<body>
    <h1>ëŒ“ê¸€ ëª©ë¡</h1>
    <ul>
    <% for (comment of comments) { %>
        <li><%= comment.content %></li>
    <% } %>
    </ul>
    <hr>
    <form action="/create" method="post">
        <input type="text" name="content">
        <input type="submit" value="ëŒ“ê¸€ ì‘ì„±">
    </form>
</body>
</html>
```
{: file="views/index.ejs"}

```diff
+ <h1>ëŒ“ê¸€ ëª©ë¡</h1>
+ <ul>
+ <% for (comment of comments) { %>
+     <li><%= comment.content %></li>
+ <% } %>
+ </ul>
+ <hr>
```
{: .nolineno }

ë‹¤ìŒì€ `index.js`ì˜ ì‹¤í–‰ ê²°ê³¼ì…ë‹ˆë‹¤.

![Read](https://user-images.githubusercontent.com/64826387/210138139-6f18914c-2b77-4332-91c6-554a8b2ac6bc.png){: .shadow }

### Update (ëŒ“ê¸€ ìˆ˜ì •)

ë‹¤ìŒì˜ ì½”ë“œëŠ” **Update** ê¸°ëŠ¥ì´ ì¶”ê°€ëœ ì½”ë“œì…ë‹ˆë‹¤.

```javascript
var express = require('express');
var app = express();

const { Sequelize, DataTypes } = require('sequelize');
const sequelize = new Sequelize({
  dialect: 'sqlite',
  storage: 'database.sqlite'
});

const Comments = sequelize.define('Comments', {
  // Model attributes are defined here
  content: {
    type: DataTypes.STRING,
    allowNull: false
  }
}, {
  // Other model options go here
});

(async () => {
  await Comments.sync();
})();

app.use(express.json());
app.use(express.urlencoded({ extended: true }));

// set the view engine to ejs
app.set('view engine', 'ejs');

// index page
app.get('/', async function(req, res) {
  const comments = await Comments.findAll();
  res.render('index', { comments: comments });
});

app.post('/create', async function(req, res) {
  const { content } = req.body;
  const comment = await Comments.create({ content: content });

  res.redirect('/')
});

app.post('/update/:id', async function(req, res) {
  const { content } = req.body;
  const { id } = req.params;
  await Comments.update({ content: content }, {
    where: {
      id: id
    }
  });

  res.redirect('/')
});

app.listen(3000);
console.log('Server is listening on port 3000');
```
{: file="index.js"}

```diff
+ app.post('/update/:id', async function(req, res) {
+ const { content } = req.body;
+ const { id } = req.params;
+ await Comments.update({ content: content }, {
+   where: {
+     id: id
+   }
+ });
+
+ res.redirect('/')
+ });
```
{: .nolineno }

```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëŒ“ê¸€ì°½ ë§Œë“¤ê¸°</title>
</head>
<body>
    <h1>ëŒ“ê¸€ ëª©ë¡</h1>
    <ul>
    <% for (comment of comments) { %>
        <li><%= comment.content %></li>
        <form action="/update/<%= comment.id %>" method="post">
            <input type="text" name="content">
            <input type="submit" value="ëŒ“ê¸€ ìˆ˜ì •">
        </form>
    <% } %>
    </ul>
    <hr>
    <form action="/create" method="post">
        <input type="text" name="content">
        <input type="submit" value="ëŒ“ê¸€ ì‘ì„±">
    </form>
</body>
</html>
```
{: file="views/index.ejs"}

```diff
+ <form action="/update/<%= comment.id %>" method="post">
+     <input type="text" name="content">
+     <input type="submit" value="ëŒ“ê¸€ ìˆ˜ì •">
+ </form>
```
{: .nolineno }

ë‹¤ìŒì€ `index.js`ì˜ ì‹¤í–‰ ê²°ê³¼ì…ë‹ˆë‹¤.

![Update](https://user-images.githubusercontent.com/64826387/210138750-11784245-3355-4898-a6e6-750cce6e6cb0.png){: .shadow }

ìœ„ì˜ <kbd>ëŒ“ê¸€ ìˆ˜ì •</kbd> ë²„íŠ¼ì„ ëˆ„ë¥´ê²Œ ë˜ë©´ `ì•ˆë…•í•˜ì„¸ìš”`ë¼ëŠ” ëŒ“ê¸€ì´ `ë°˜ê°€ì›Œìš”`ë¡œ ë°”ë€Œê²Œ ë©ë‹ˆë‹¤.

### Delete (ëŒ“ê¸€ ì‚­ì œ)

ë‹¤ìŒì˜ ì½”ë“œëŠ” **Delete** ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì–´ **CRUD**ê°€ ëª¨ë‘ ì ìš©ëœ ì½”ë“œì…ë‹ˆë‹¤.

```javascript
var express = require('express');
var app = express();

const { Sequelize, DataTypes } = require('sequelize');
const sequelize = new Sequelize({
  dialect: 'sqlite',
  storage: 'database.sqlite'
});

const Comments = sequelize.define('Comments', {
  // Model attributes are defined here
  content: {
    type: DataTypes.STRING,
    allowNull: false
  }
}, {
  // Other model options go here
});

(async () => {
  await Comments.sync();
})();

app.use(express.json());
app.use(express.urlencoded({ extended: true }));

// set the view engine to ejs
app.set('view engine', 'ejs');

// index page
app.get('/', async function(req, res) {
  const comments = await Comments.findAll();
  res.render('index', { comments: comments });
});

app.post('/create', async function(req, res) {
  const { content } = req.body;
  const comment = await Comments.create({ content: content });

  res.redirect('/')
});

app.post('/update/:id', async function(req, res) {
  const { content } = req.body;
  const { id } = req.params;
  await Comments.update({ content: content }, {
    where: {
      id: id
    }
  });

  res.redirect('/')
});

app.post('/delete/:id', async function(req, res) {
  const { id } = req.params;
  await Comments.destroy({
    where: {
      id: id
    }
  });

  res.redirect('/')
});

app.listen(3000);
console.log('Server is listening on port 3000');
```
{: file="index.js"}

```diff
+ app.post('/delete/:id', async function(req, res) {
+   const { id } = req.params;
+   await Comments.destroy({
+     where: {
+       id: id
+     }
+   });
+ 
+   res.redirect('/')
+ });
```
{: .nolineno }

```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëŒ“ê¸€ì°½ ë§Œë“¤ê¸°</title>
</head>
<body>
    <h1>ëŒ“ê¸€ ëª©ë¡</h1>
    <ul>
    <% for (comment of comments) { %>
        <li><%= comment.content %></li>
        <form action="/update/<%= comment.id %>" method="post">
            <input type="text" name="content">
            <input type="submit" value="ëŒ“ê¸€ ìˆ˜ì •">
        </form>
        <form action="/delete/<%= comment.id %>" method="post">
            <input type="submit" value="ëŒ“ê¸€ ì‚­ì œ">
        </form>
    <% } %>
    </ul>
    <hr>
    <form action="/create" method="post">
        <input type="text" name="content">
        <input type="submit" value="ëŒ“ê¸€ ì‘ì„±">
    </form>
</body>
</html>
```
{: file="views/index.ejs"}

```diff
+ <form action="/delete/<%= comment.id %>" method="post">
+     <input type="submit" value="ëŒ“ê¸€ ì‚­ì œ">
+ </form>
```
{: .nolineno }

ë‹¤ìŒì€ `index.js`ì˜ ì‹¤í–‰ ê²°ê³¼ì…ë‹ˆë‹¤.

![Delete](https://user-images.githubusercontent.com/64826387/210138956-5e114967-44ae-4d9b-ae2e-3e8b4c639ee3.png){: .shadow }

ìœ„ í™”ë©´ì—ì„œ <kbd>ëŒ“ê¸€ ì‚­ì œ</kbd> ë²„íŠ¼ì„ ëˆ„ë¥´ê²Œ ë˜ë©´ `ë°˜ê°€ì›Œìš”` ëŒ“ê¸€ì€ DBì—ì„œ ì‚­ì œë©ë‹ˆë‹¤.

ê¸´ ê¸€ ì½ì–´ì£¼ì…”ì„œ í•­ìƒ ê°ì‚¬í•©ë‹ˆë‹¤ :)